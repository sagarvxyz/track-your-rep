---
import BaseLayout from '@layouts/BaseLayout.astro';
import BillDisplay from '@lib/BillDisplay.astro';
import { getDevConfig } from '@lib/devConfig';

export async function getStaticPaths() {
	const url = getDevConfig('url');
	const testQueryString = new URLSearchParams({
		bill_id: 'hr7925-117',
	}).toString();
	const response = await fetch(`${url}/api/bills?${testQueryString}`, {
		method: 'get',
	});
	const data = await response.json();
	const bills = data.results;
	return Object.values(bills).map((bill) => {
		return {
			params: { id: bill.bill_id },
			props: { bill },
		};
	});
}
const { id } = Astro.params;
const { bill } = Astro.props;
---

<BaseLayout>
	<p>{id}</p>
	<BillDisplay {bill} />
</BaseLayout>
